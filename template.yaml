apiVersion: zeabur.com/v1
kind: Template
metadata:
  name: chuangcut-video-workflow

spec:
  description: |
    åˆ›å‰ªè§†é¢‘å·¥ä½œæµ - åŸºäº Google Gemini AI çš„å…¨è‡ªåŠ¨è§†é¢‘å‰ªè¾‘å·¥å…·

    âœ¨ æ ¸å¿ƒåŠŸèƒ½:
    â€¢ ğŸ“¹ æ™ºèƒ½è§†é¢‘åˆ†æ - ä½¿ç”¨ Gemini AI æ·±åº¦ç†è§£è§†é¢‘å†…å®¹
    â€¢ âœ‚ï¸ è‡ªåŠ¨ç”Ÿæˆåˆ†é•œè„šæœ¬ - AI è‡ªåŠ¨è§„åˆ’å‰ªè¾‘èŠ‚å¥å’Œè¦ç‚¹
    â€¢ ğŸ™ï¸ AI é…éŸ³åˆæˆ - Fish Audio é«˜è´¨é‡è¯­éŸ³ç”Ÿæˆ
    â€¢ âš¡ äº‘ç«¯éŸ³ç”»åŒæ­¥å¤„ç† - NCA Toolkit ä¸“ä¸šè§†é¢‘å¤„ç†
    â€¢ ğŸ”„ æ–­ç‚¹ç»­ä¼  - ä»»åŠ¡å¤±è´¥å¯ä»æ–­ç‚¹æ¢å¤
    â€¢ ğŸ“Š ä»»åŠ¡çŠ¶æ€ç®¡ç† - å®æ—¶ç›‘æ§å¤„ç†è¿›åº¦
    â€¢ ğŸ¨ å¤šç§è§£è¯´é£æ ¼ - 15+ é¢„è®¾é£æ ¼å¯é€‰

    ğŸ” æˆæƒè¯´æ˜:
    éƒ¨ç½²å‰è¯·è”ç³»ä¾›åº”å•†è·å–æˆæƒç  (LICENSE_KEY)

    ğŸ“š æŠ€æœ¯æ ˆ:
    Next.js 16 + React 19 + TypeScript + SQLite + Docker

  icon: https://raw.githubusercontent.com/xiangyugongzuoliu/chuangcut-video-workflow-zeabur/main/assets/icon.png
  coverImage: https://raw.githubusercontent.com/xiangyugongzuoliu/chuangcut-video-workflow-zeabur/main/assets/cover.png
  tags:
    - ai
    - video
    - automation
    - gemini
    - nextjs

  variables:
    # ========================================
    # æˆæƒé…ç½®ï¼ˆå¿…éœ€ï¼‰
    # ========================================
    - key: LICENSE_KEY
      type: STRING
      name: ğŸ”‘ æˆæƒç 
      description: ä¾›åº”å•†æä¾›çš„æˆæƒç ï¼ˆå¿…å¡«ï¼‰ã€‚æ ¼å¼ï¼šCCUT-XXXXXX-XXXXXXXXXXXX-XXXX
      expose: true

    # ========================================
    # åŠ å¯†é…ç½®ï¼ˆå¿…éœ€ï¼‰
    # ========================================
    - key: ENCRYPTION_KEY
      type: STRING
      name: ğŸ” åŠ å¯†å¯†é’¥
      description: |
        ç”¨äºåŠ å¯†å­˜å‚¨ API å¯†é’¥ï¼Œå¿…é¡»æ˜¯ 64 ä¸ªåå…­è¿›åˆ¶å­—ç¬¦ï¼ˆ32 å­—èŠ‚ï¼‰
        ç”Ÿæˆæ–¹æ³•ï¼šnode -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
      expose: true

    # ========================================
    # æ•°æ®åº“é…ç½®
    # ========================================
    - key: DATABASE_URL
      type: STRING
      name: ğŸ’¾ æ•°æ®åº“è·¯å¾„
      description: SQLite æ•°æ®åº“æ–‡ä»¶è·¯å¾„
      default: file:/data/db.sqlite

    # ========================================
    # ç›®å½•é…ç½®
    # ========================================
    - key: TEMP_DIR
      type: STRING
      name: ğŸ“ ä¸´æ—¶ç›®å½•
      description: ä¸´æ—¶æ–‡ä»¶å­˜å‚¨è·¯å¾„
      default: /temp

    - key: OUTPUT_DIR
      type: STRING
      name: ğŸ“ è¾“å‡ºç›®å½•
      description: æœ€ç»ˆæˆç‰‡å­˜å‚¨è·¯å¾„
      default: /output

    - key: LOGS_DIR
      type: STRING
      name: ğŸ“ æ—¥å¿—ç›®å½•
      description: æ—¥å¿—æ–‡ä»¶å­˜å‚¨è·¯å¾„
      default: /logs

    # ========================================
    # NCA æœåŠ¡é…ç½®
    # ========================================
    - key: NCA_REQUEST_TIMEOUT_MS
      type: STRING
      name: â±ï¸ NCA è¯·æ±‚è¶…æ—¶
      description: NCA API è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ï¼Œé»˜è®¤ 5 åˆ†é’Ÿ
      default: "300000"

    - key: NCA_WEBHOOK_URL
      type: STRING
      name: ğŸ”— NCA Webhook åœ°å€
      description: NCA Webhook å›è°ƒåœ°å€ï¼ˆå¿…å¡«ä½†ç›®å‰æœªä½¿ç”¨ï¼‰
      default: https://www.google.com

    # ========================================
    # ç³»ç»Ÿé…ç½®
    # ========================================
    - key: NODE_ENV
      type: STRING
      name: ğŸŒ Node ç¯å¢ƒ
      description: Node.js è¿è¡Œç¯å¢ƒ
      default: production

    - key: LOG_LEVEL
      type: STRING
      name: ğŸ“Š æ—¥å¿—çº§åˆ«
      description: æ—¥å¿—çº§åˆ«ï¼ˆdebug | info | warn | errorï¼‰
      default: info

  services:
    - name: chuangcut-video-workflow
      icon: https://raw.githubusercontent.com/xiangyugongzuoliu/chuangcut-video-workflow-zeabur/main/assets/icon.png
      template: PREBUILT
      spec:
        source:
          image: xiangyugongzuoliu/chuangcut-video-workflow:latest

        ports:
          - id: web
            port: 3000
            type: HTTP

        env:
          # æˆæƒé…ç½®
          LICENSE_KEY:
            default: ${LICENSE_KEY}
            expose: true

          # åŠ å¯†é…ç½®
          ENCRYPTION_KEY:
            default: ${ENCRYPTION_KEY}
            expose: true

          # æ•°æ®åº“é…ç½®
          DATABASE_URL:
            default: ${DATABASE_URL}

          # ç›®å½•é…ç½®
          TEMP_DIR:
            default: ${TEMP_DIR}

          OUTPUT_DIR:
            default: ${OUTPUT_DIR}

          LOGS_DIR:
            default: ${LOGS_DIR}

          # NCA æœåŠ¡é…ç½®
          NCA_REQUEST_TIMEOUT_MS:
            default: ${NCA_REQUEST_TIMEOUT_MS}

          NCA_WEBHOOK_URL:
            default: ${NCA_WEBHOOK_URL}

          # ç³»ç»Ÿé…ç½®
          NODE_ENV:
            default: ${NODE_ENV}

          LOG_LEVEL:
            default: ${LOG_LEVEL}

        volumes:
          - id: data
            dir: /data

          - id: temp
            dir: /temp

          - id: output
            dir: /output

          - id: logs
            dir: /logs

        # èµ„æºé…ç½®ï¼ˆæ¨èï¼‰
        resources:
          limits:
            cpu: 4
            memory: 8192  # 8GB
          requests:
            cpu: 2
            memory: 4096  # 4GB

        # å¥åº·æ£€æŸ¥
        healthCheck:
          type: http
          path: /api/health
          port: 3000
          initialDelaySeconds: 30
          periodSeconds: 30
          timeoutSeconds: 5
          failureThreshold: 3

  readme: |
    # åˆ›å‰ªè§†é¢‘å·¥ä½œæµ

    åŸºäº Google Gemini AI çš„å…¨è‡ªåŠ¨è§†é¢‘å‰ªè¾‘å·¥å…·ã€‚

    ## å¿«é€Ÿå¼€å§‹

    1. ç‚¹å‡»ã€ŒDeploy on Zeaburã€æŒ‰é’®
    2. æŒ‰æç¤ºå¡«å†™ç¯å¢ƒå˜é‡
    3. éƒ¨ç½²å®Œæˆåï¼Œè®¿é—® `/settings` é¡µé¢é…ç½® API å¯†é’¥
    4. è®¿é—® `/jobs` åˆ›å»ºè§†é¢‘ä»»åŠ¡

    ## æ ¸å¿ƒåŠŸèƒ½

    - æ™ºèƒ½è§†é¢‘åˆ†æï¼ˆGemini AIï¼‰
    - è‡ªåŠ¨ç”Ÿæˆåˆ†é•œè„šæœ¬
    - AI é…éŸ³åˆæˆï¼ˆFish Audioï¼‰
    - äº‘ç«¯éŸ³ç”»åŒæ­¥ï¼ˆNCA Toolkitï¼‰
    - æ–­ç‚¹ç»­ä¼ å’Œä»»åŠ¡ç®¡ç†

    ## ä½œè€…

    ç¿”å®‡å·¥ä½œæµ
